{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatButtonModule } from '@angular/material/button';\nimport * as L from 'leaflet';\nimport { ContactSellerDialogComponent } from '../contact-seller-dialog/contact-seller-dialog.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../../core/services/property.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/material/progress-spinner\";\nimport * as i6 from \"@angular/material/button\";\nfunction PropertyDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"mat-spinner\", 4);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction PropertyDetailsComponent_div_1_div_1_img_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"img\", 22);\n    i0.ɵɵlistener(\"click\", function PropertyDetailsComponent_div_1_div_1_img_2_Template_img_click_0_listener() {\n      const m_r3 = i0.ɵɵrestoreView(_r2).$implicit;\n      const ctx_r3 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r3.openViewer(m_r3.mediaUrl));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const m_r3 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r3.property.title);\n    i0.ɵɵproperty(\"src\", m_r3.mediaUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PropertyDetailsComponent_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 19)(1, \"div\", 20);\n    i0.ɵɵtemplate(2, PropertyDetailsComponent_div_1_div_1_img_2_Template, 1, 2, \"img\", 21);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.property.media);\n  }\n}\nfunction PropertyDetailsComponent_div_1_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 23);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵpropertyInterpolate(\"alt\", ctx_r3.property.title);\n    i0.ɵɵproperty(\"src\", ctx_r3.property.thumbnailUrl || \"/assets/default.jpg\", i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PropertyDetailsComponent_div_1_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵelement(1, \"img\", 25);\n    i0.ɵɵelementStart(2, \"button\", 26);\n    i0.ɵɵlistener(\"click\", function PropertyDetailsComponent_div_1_div_4_Template_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r3 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r3.closeViewer());\n    });\n    i0.ɵɵtext(3, \"\\u2715\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", ctx_r3.selectedImage, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction PropertyDetailsComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵtemplate(1, PropertyDetailsComponent_div_1_div_1_Template, 3, 1, \"div\", 6)(2, PropertyDetailsComponent_div_1_ng_template_2_Template, 1, 2, \"ng-template\", null, 0, i0.ɵɵtemplateRefExtractor)(4, PropertyDetailsComponent_div_1_div_4_Template, 4, 1, \"div\", 7);\n    i0.ɵɵelementStart(5, \"h1\", 8);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 9);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 10)(10, \"div\", 11);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 12);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"date\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(16, \"p\", 13);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 14)(19, \"p\")(20, \"strong\");\n    i0.ɵɵtext(21, \"Type:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"p\")(24, \"strong\");\n    i0.ɵɵtext(25, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"p\")(28, \"strong\");\n    i0.ɵɵtext(29, \"Posted By:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(31, \"p\")(32, \"strong\");\n    i0.ɵɵtext(33, \"Country:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(34);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"div\", 15)(36, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function PropertyDetailsComponent_div_1_Template_button_click_36_listener() {\n      i0.ɵɵrestoreView(_r1);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.openContactForm());\n    });\n    i0.ɵɵtext(37, \" Contact Seller\\n\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(38, \"div\", 15)(39, \"h2\", 17);\n    i0.ɵɵtext(40, \"Location\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(41, \"div\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const defaultImage_r6 = i0.ɵɵreference(3);\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.property.media == null ? null : ctx_r3.property.media.length)(\"ngIfElse\", defaultImage_r6);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.selectedImage);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r3.property.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", ctx_r3.property.address, \", \", ctx_r3.property.city, \", \", ctx_r3.property.state, \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"\\u20B9\", i0.ɵɵpipeBind1(12, 14, ctx_r3.property.price), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\"Available from: \", i0.ɵɵpipeBind1(15, 16, ctx_r3.property.availableFrom), \"\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r3.property.description);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.property.propertyType, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.property.status, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.property.postedBy, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.property.country, \"\");\n  }\n}\nexport let PropertyDetailsComponent = /*#__PURE__*/(() => {\n  class PropertyDetailsComponent {\n    constructor(route, propertyService, dialog) {\n      this.route = route;\n      this.propertyService = propertyService;\n      this.dialog = dialog;\n      this.loading = true;\n      this.selectedImage = null;\n      this.mapInitialized = false;\n    }\n    ngOnInit() {\n      const id = this.route.snapshot.paramMap.get('id');\n      if (id) {\n        this.propertyService.getById(id).subscribe({\n          next: res => {\n            this.property = res;\n            this.loading = false;\n            setTimeout(() => this.initializeMap(), 100);\n          },\n          error: () => this.loading = false\n        });\n      }\n    }\n    initializeMap() {\n      if (this.mapInitialized || !this.property.latitude || !this.property.longitude) return;\n      const map = L.map('map').setView([this.property.latitude, this.property.longitude], 14);\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        maxZoom: 18,\n        attribution: '© OpenStreetMap contributors'\n      }).addTo(map);\n      L.marker([this.property.latitude, this.property.longitude]).addTo(map).bindPopup(this.property.title).openPopup();\n      this.mapInitialized = true;\n    }\n    openViewer(url) {\n      this.selectedImage = url;\n    }\n    closeViewer() {\n      this.selectedImage = null;\n    }\n    openContactForm() {\n      this.dialog.open(ContactSellerDialogComponent, {\n        width: '400px',\n        data: {\n          propertyTitle: this.property?.title\n        }\n      });\n    }\n    static {\n      this.ɵfac = function PropertyDetailsComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || PropertyDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.PropertyService), i0.ɵɵdirectiveInject(i3.MatDialog));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: PropertyDetailsComponent,\n        selectors: [[\"app-property-details\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 2,\n        vars: 2,\n        consts: [[\"defaultImage\", \"\"], [\"class\", \"flex justify-center my-10\", 4, \"ngIf\"], [\"class\", \"max-w-4xl mx-auto bg-white rounded shadow p-5 md:p-8\", 4, \"ngIf\"], [1, \"flex\", \"justify-center\", \"my-10\"], [\"diameter\", \"40\"], [1, \"max-w-4xl\", \"mx-auto\", \"bg-white\", \"rounded\", \"shadow\", \"p-5\", \"md:p-8\"], [\"class\", \"relative mb-4\", 4, \"ngIf\", \"ngIfElse\"], [\"class\", \"fixed inset-0 bg-black/80 flex items-center justify-center z-50\", 4, \"ngIf\"], [1, \"text-2xl\", \"md:text-3xl\", \"font-semibold\", \"mb-2\"], [1, \"text-slate-600\", \"mb-4\"], [1, \"flex\", \"items-center\", \"justify-between\", \"mb-4\"], [1, \"text-xl\", \"font-bold\", \"text-blue-700\"], [1, \"text-sm\", \"text-slate-500\"], [1, \"text-slate-700\", \"leading-relaxed\", \"mb-6\"], [1, \"border-t\", \"pt-4\", \"text-sm\", \"text-slate-500\"], [1, \"mt-8\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 1, \"w-full\", \"md:w-auto\", 3, \"click\"], [1, \"text-xl\", \"font-semibold\", \"mb-2\"], [\"id\", \"map\", 1, \"h-80\", \"w-full\", \"rounded\", \"shadow\"], [1, \"relative\", \"mb-4\"], [1, \"flex\", \"overflow-x-auto\", \"gap-3\", \"pb-2\"], [\"class\", \"h-64 md:h-80 object-cover rounded cursor-pointer hover:scale-105 transition-transform\", 3, \"src\", \"alt\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"h-64\", \"md:h-80\", \"object-cover\", \"rounded\", \"cursor-pointer\", \"hover:scale-105\", \"transition-transform\", 3, \"click\", \"src\", \"alt\"], [1, \"w-full\", \"h-80\", \"object-cover\", \"rounded\", \"mb-4\", 3, \"src\", \"alt\"], [1, \"fixed\", \"inset-0\", \"bg-black/80\", \"flex\", \"items-center\", \"justify-center\", \"z-50\"], [1, \"max-h-[90vh]\", \"max-w-[90vw]\", \"rounded\", \"shadow-lg\", 3, \"src\"], [1, \"absolute\", \"top-5\", \"right-5\", \"bg-white/80\", \"text-black\", \"rounded-full\", \"p-2\", 3, \"click\"]],\n        template: function PropertyDetailsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, PropertyDetailsComponent_div_0_Template, 2, 0, \"div\", 1)(1, PropertyDetailsComponent_div_1_Template, 42, 18, \"div\", 2);\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", ctx.loading);\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", !ctx.loading && ctx.property);\n          }\n        },\n        dependencies: [CommonModule, i4.NgForOf, i4.NgIf, i4.DecimalPipe, i4.DatePipe, MatProgressSpinnerModule, i5.MatProgressSpinner, MatButtonModule, i6.MatButton],\n        styles: [\"img[_ngcontent-%COMP%]{border-radius:.5rem;transition:transform .3s ease-in-out}img[_ngcontent-%COMP%]:hover{transform:scale(1.02)}.fixed[_ngcontent-%COMP%]{backdrop-filter:blur(4px)}#map[_ngcontent-%COMP%]{height:320px;border-radius:.5rem;overflow:hidden}\"]\n      });\n    }\n  }\n  return PropertyDetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}